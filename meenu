from datetime import datetime, timedelta

def create_ntoes(note_number,notes):
    while True:
        number = note_number+1
        username = input('Введите имя пользователя: ')  # ввод имени пользователя
        title = input('Введите заголовок заметки: ')
        content = input('Введите пункт заметки : ')
        status = input('Введите статус заметки: ')
        created_date = datetime.now().strftime('%d-%m-%Y')

        while True:  # Преобразуем введённую дату в объект datetime
            date_input = input('Введите дату (дд-мм-гггг): ')
            try:
                issue_date = datetime.strptime(date_input, '%d-%m-%Y').strftime('%d-%m-%Y')  # Извлекаем только дату
                break  # Ввод корректен, выходим из цикла
            except ValueError:
                print("Ошибка: Неправильный формат даты. Пожалуйста, используйте 'дд-мм-гггг'.")

        note = {  # создаем словарь с ключами
            'номер заметки':number,
            'имя': username,
            'заголовок': title,
            'пункт заметки': content,
            'статус': status,
            'дата создания заметки': created_date,
            'срок выполнения заметки': issue_date
        }
        notes.append(note)  # добавляем словарь в список

        stop = input('Создать еще одну заметку? (да/нет): ').strip()
        if stop.lower() != 'да':  # проверка ввода да в виде да или ДА
            break
    return notes,number

def show_notes(notes):
    print("ваши заметки:")
    for note in notes: #вывод всех получившихся заметок
        print(f" Номер заметки: {note['номер заметки']}\n Имя: {note['имя']}\n Заголовок: {note['заголовок']}\n Пункт заметки: {note['пункт заметки']}\n "
            f"Статус: {note['статус']}\n Дата создания: {note['дата создания заметки']}\n "
            f"Срок выполнения до: {note['срок выполнения заметки']}\n ________________________")
        
def update_note(notes):
    while True:
        key = input('введите поле заметки которое хотите поменять: ', )
        value = input('введите значение которое хотите заменить: ',)
        new_value = input('введите новое значение: ', )
        for index, notice in enumerate(notes):
            if notice.get(key) == value:
                print('ищем индекс заметки', index)
                new_notes = [notice.copy() for notice in notes]  # создаем дубликат списка для сохранения оригинала
                if key in new_notes[index]:  # проверка ключа в заметке по индексу
                    new_notes[index][key] = new_value
                return new_notes # возвращаем новый список с внесенным изменением
            else:
                print('значение не найдено')
            continue

def delete_note(notes):
    delete_number = int(input('введите номер заметки, которую хотите удалить: ',))
    new_notes_del=notes
    for note in new_notes_del:
        if delete_number == note['номер заметки']:
            print('ya popal kuda hotel')
            new_notes_del.remove(note)
            print(new_notes_del)
        return new_notes_del
    
        

#def search_notes():
 #   print(a)
def menu():
    notes=[]
    note_number=0
    notes,note_number = create_ntoes(note_number,notes)
    show_notes(notes)
    new_notes = update_note(notes)
    show_notes(new_notes)
    new_notes_del=delete_note(new_notes)
    show_notes(new_notes_del)
